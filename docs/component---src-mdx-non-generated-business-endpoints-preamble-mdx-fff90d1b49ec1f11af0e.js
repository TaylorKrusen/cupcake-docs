(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Ogh8:function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return s})),a.d(t,"default",(function(){return b}));var n=a("Fcif"),o=a("+I+c"),i=a("/FXl"),r=a("TjRS"),s=(a("aD51"),{});void 0!==s&&s&&s===Object(s)&&Object.isExtensible(s)&&!s.hasOwnProperty("__filemeta")&&Object.defineProperty(s,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/mdx/non-generated/business-endpoints_preamble.mdx"}});var c={_frontmatter:s},l=r.a;function b(e){var t=e.components,a=Object(o.a)(e,["components"]);return Object(i.b)(l,Object(n.a)({},c,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"dropbox-business-api"},"Dropbox Business API"),Object(i.b)("p",null,"The Dropbox Business API allows apps to manage the user lifecycle for a ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.dropbox.com/business"}),"Dropbox Business account")," and perform API actions on all members of a team. It also gives apps programmatic access to Dropbox Business admin functionality."),Object(i.b)("h2",{id:"permissions"},"Permissions"),Object(i.b)("h4",{id:"scopes"},"Scopes"),Object(i.b)("p",null,"Scopes control the level of access your app has into user and team data. After creating your app in the ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.dropbox.com/developers/apps"}),"App Console"),", you can select your apps scopes on the Permissions tab. You can read more about scopes in the ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.dropbox.com/lp/developers/reference/oauth-guide"}),"OAuth Guide"),"."),Object(i.b)("h4",{id:"access-types"},"Access types"),Object(i.b)("p",null,"[For new apps, we recommend using scopes.]"),Object(i.b)("p",null,"There are four different access types of Dropbox Business API permissions."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("em",{parentName:"li"},"Team information")," – Information about the team and aggregate usage data"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("em",{parentName:"li"},"Team auditing")," – Team information, plus the team's detailed activity log"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("em",{parentName:"li"},"Team member file access")," – Team information and auditing, plus the ability to ",Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.dropbox.com/developers/documentation/http/teams#teams-member-file-access"}),"perform any action as any team member")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("em",{parentName:"li"},"Team member management")," – Team information, plus the ability to add, edit, and delete team members")),Object(i.b)("h2",{id:"creating-an-application"},"Creating an application"),Object(i.b)("p",null,"To create a Dropbox Business app, visit the ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.dropbox.com/developers/apps/create"}),"app creation page"),"."),Object(i.b)("h2",{id:"testing-your-application"},"Testing your application"),Object(i.b)("p",null,"To test an app that calls the Dropbox Business API endpoints, you can request a free Dropbox Business Development Account ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://docs.google.com/forms/d/e/1FAIpQLSfkzPmp9srHG9jwE3Uc0bFOwknN-rrLQWr1mf_3FGl86ydCiQ/viewform?entry.1304485640=Developer"}),"here"),". This will allow you to test your app using a standard Dropbox Business team. Development accounts are granted on a by-request basis and are contingent on additional terms and conditions outlined in the request form."),Object(i.b)("h2",{id:"linking-to-a-team"},"Linking to a team"),Object(i.b)("p",null,"Developers will need to direct a Dropbox Business team administrator through the ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.dropbox.com/lp/developers/reference/oauth-guide"}),"standard OAuth 2.0 flow")," to install their application on a Dropbox Business team. The OAuth response/redirect will include an additional ",Object(i.b)("inlineCode",{parentName:"p"},"team_id")," field that can be used to uniquely identify a team."),Object(i.b)("p",null,"Dropbox Business API OAuth tokens can enable extensive access to team data, so ",Object(i.b)("em",{parentName:"p"},"it is your responsibility to properly secure them server-side"),". They should never be cached in insecure environments or downloaded to client devices."),Object(i.b)("h2",{id:"member-file-access"},"Member file access"),Object(i.b)("p",null,"A Dropbox Business app can make calls to the ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.dropbox.com/developers/documentation/http/teams#documentation"}),"Dropbox API")," for any member of the Dropbox Business team. Your app must have Team member file access permission."),Object(i.b)("p",null,"To make calls on a member's behalf, use the OAuth token granted to the app by the team. Specify the ",Object(i.b)("inlineCode",{parentName:"p"},"member_id")," of the user that the app wants to act on using a custom HTTP header called ",Object(i.b)("inlineCode",{parentName:"p"},"Dropbox-API-Select-User"),"."),Object(i.b)("p",null,"Notes:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},'This feature is currently limited to only team members in the "active", "suspended", and "invited" states.'),Object(i.b)("li",{parentName:"ul"},"A common use case for Team member file access is scanning through member Dropbox accounts. The recommended approach for this is repeated calls to ",Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.dropbox.com/developers/documentation/http/documentation#files-list_folder-continue"}),"/files/list_folder/continue"),".")),Object(i.b)("p",null,"An additional error may occur when using ",Object(i.b)("inlineCode",{parentName:"p"},"Dropbox-API-Select-User"),":"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("em",{parentName:"li"},"401")," Member ID doesn't exist on the team.")),Object(i.b)("p",null,"An alternative and advanced method for Business API apps to access and perform operations on team-owned content is to use the ",Object(i.b)("inlineCode",{parentName:"p"},"Dropbox-API-Select-Admin")," HTTP header instead of ",Object(i.b)("inlineCode",{parentName:"p"},"Dropbox-API-Select-User"),"."),Object(i.b)("p",null,"There are a several key differences between the two:"),Object(i.b)("p",null,"First, both headers specify the ",Object(i.b)("inlineCode",{parentName:"p"},"member_id")," of a team member in their values, but for ",Object(i.b)("inlineCode",{parentName:"p"},"Dropbox-API-Select-Admin")," this must refer to a team admin rather than an arbitrary member."),Object(i.b)("p",null,"Second, ",Object(i.b)("inlineCode",{parentName:"p"},"Dropbox-API-Select-User"),' allows access to and operations on content that currently exists in the "selected" team member\'s Dropbox. This includes their private files and folders as well as contents of any shared or team folders they not only have access to but also have added to their Dropbox (i.e. "mounted" in API terms).'),Object(i.b)("p",null,"In contrast, ",Object(i.b)("inlineCode",{parentName:"p"},"Dropbox-API-Select-Admin")," allows access to and operations on any team-owned content, including unmounted content. This includes any team member's private files and folders as well as contents of any shared folders owned by a member of the team and team folders. In particular, the team admin being impersonated doesn't have to have the target content in their Dropbox and doesn't have to be in the membership of any shared or team folders the content might reside in."),Object(i.b)("p",null,"Specifically, there are two different modes for ",Object(i.b)("inlineCode",{parentName:"p"},"Dropbox-API-Select-Admin")," header:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("em",{parentName:"li"},"Whole Team")," The endpoint can access content of team folders as well as team member's private files."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("em",{parentName:"li"},"Team Admin")," The endpoint can access content of team folders but not team member's private files.")),Object(i.b)("p",null,"The supported ",Object(i.b)("inlineCode",{parentName:"p"},"Dropbox-API-Select-Admin")," mode for each API endpoint is documented under Authentication section."),Object(i.b)("p",null,"In general, ",Object(i.b)("em",{parentName:"p"},"Whole Team")," is supported by read-only endpoints in order to simplify referring to and traversing team-owned content. Conversely, ",Object(i.b)("em",{parentName:"p"},"Team Admin")," is supported by mutable calls in order to perform particular actions an administrator (rather than user) - which may be a required permission for some operations within team spaces."),Object(i.b)("p",null,"Since traditional logical paths in Dropbox must refer to mounted content, the endpoints that support the ",Object(i.b)("inlineCode",{parentName:"p"},"Dropbox-API-Select-Admin")," header accept namespace-relative paths. These take the format of ",Object(i.b)("inlineCode",{parentName:"p"},"ns:<namespace_id><namespace_path>"),", where ",Object(i.b)("inlineCode",{parentName:"p"},"<namespace_id>")," is the ",Object(i.b)("inlineCode",{parentName:"p"},"shared_folder_id")," or ",Object(i.b)("inlineCode",{parentName:"p"},"team_folder_id")," of the shared folder or the team folder containing the file or folder, respectively, and ",Object(i.b)("inlineCode",{parentName:"p"},"<namespace_path>")," is the logical path to the content relative to its shared folder or team folder container. See our ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.dropbox.com/developers/reference/namespace-guide"}),"namespace guide")," for more information."),Object(i.b)("p",null,"Note that not all User API endpoints support the ",Object(i.b)("inlineCode",{parentName:"p"},"Dropbox-API-Select-Admin")," header. Check the API docs for a list of endpoints that do."),Object(i.b)("h2",{id:"webhooks"},"Webhooks"),Object(i.b)("p",null,"Dropbox Business API apps that have specified a webhook URL in the ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.dropbox.com/developers/apps"}),"App Console")," will receive change notifications for the team. There are two classes of change notifications, each associated with different permissions."),Object(i.b)("h3",{id:"team-member-file-access-notifications"},"Team member file access notifications"),Object(i.b)("p",null,"Two types of apps will receive per-user webhook notifications from all members of the team. The webhook notification contains a list of all ",Object(i.b)("inlineCode",{parentName:"p"},"member_id"),"s that have changes within their account. This is similar to the ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.dropbox.com/developers/webhooks"}),"Dropbox API webhooks")," behavior."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Apps with the Team member file access permission"),Object(i.b)("li",{parentName:"ul"},"Scoped apps whose link to the team contains ",Object(i.b)("inlineCode",{parentName:"li"},"team_member.data")," and ",Object(i.b)("inlineCode",{parentName:"li"},"files.metadata.read")," scope. See more info about OAuth2 scopes ",Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.dropbox.com/lp/developers/reference/oauth-guide.html"}),"here"),".")),Object(i.b)("p",null,"For Team member file access notifications, your endpoint will receive JSON with the following format:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-JSON"}),'{\n  "list_folder": {\n    "teams": {\n      "team_id1": [\n        "member_id1",\n        "member_id2",\n        ...\n      ],\n      "team_id2": [\n        "member_id1",\n        "member_id2",\n        ...\n      ],\n      ...\n    }\n  },\n  "delta": {\n    "teams": {\n      "team_id1": [\n        "member_id1",\n        "member_id2",\n        ...\n      ],\n      "team_id2": [\n        "member_id1",\n        "member_id2",\n        ...\n      ],\n      ...\n    }\n  }\n}\n')),Object(i.b)("p",null,"Note that a single change to a file in a shared folder will trigger a webhook for each user that the folder is shared with (and will also show up in the /list_folder entries for each account). You may want to track these occurrences to avoid re-processing the same file multiple times. One possible method would be to track a combination of the (unique) shared folder ID, file path, and rev for a file to identify if it is the same as a previously-processed change. Files outside a shared folder don't have this concern."),Object(i.b)("h3",{id:"team-change-notifications"},"Team change notifications"),Object(i.b)("p",null,"This type of notification will be triggered in the following cases:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"User is invited to team"),Object(i.b)("li",{parentName:"ul"},'User joins team (transitions from "invited" to "active" status)'),Object(i.b)("li",{parentName:"ul"},"User is removed from team"),Object(i.b)("li",{parentName:"ul"},"User's profile or permissions are updated")),Object(i.b)("p",null,"There are also two types of apps that are eligible for team change notifications"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Apps with Team member management or Team member file access permissions will receive webhook notifications for changes to the team membership."),Object(i.b)("li",{parentName:"ul"},"Scoped apps whose link to the team contains ",Object(i.b)("inlineCode",{parentName:"li"},"members.read scope"),". See more info about OAuth2 scopes ",Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.dropbox.com/lp/developers/reference/oauth-guide.html"}),"here"),".")),Object(i.b)("p",null,"For Team change notifications, your endpoint will receive JSON with the following format:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-JSON"}),'{\n  "team_events": [\n    {\n      "event": "member_info_change",\n      "team_id": "team_id1",\n      "member_ids": [\n        "member_id1",\n        "member_id2",\n        ...\n      ]\n    },\n    ...\n  ]\n}\n')))}void 0!==b&&b&&b===Object(b)&&Object.isExtensible(b)&&!b.hasOwnProperty("__filemeta")&&Object.defineProperty(b,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/mdx/non-generated/business-endpoints_preamble.mdx"}}),b.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-mdx-non-generated-business-endpoints-preamble-mdx-fff90d1b49ec1f11af0e.js.map